# change the prefix from 'C-b' to 'C-a'
# (remap capslock to CTRL for easy access)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# start with window 1 (instead of 0)
set -g base-index 1

# start with pane 1
set -g pane-base-index 1

# split panes using | and -, make sure they open in the same path
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

unbind '"'
unbind %

# open new windows in the current path
bind c new-window -c "#{pane_current_path}"

# reload config file
bind r source-file ~/.config/tmux/tmux.conf \; display "Config Reloaded!"

unbind p
bind p previous-window

# shorten command delay
set -sg escape-time 1

# don't rename windows automatically
set -g allow-rename off

# renumber windows automatically after removing a window
set -g renumber-windows on

# set titles
set -g set-titles on

# mouse control (clickable windows, panes, resizable panes)
set -g mouse on

# focus events enabled for terminals that support them
set -g focus-events on

# Use Alt-arrow keys without prefix key to switch panes
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

bind S command-prompt -p ssh: "new-window -n %1 'ssh %1'"
bind M command-prompt -p man: "split-window -p 65 'exec man %%'"

# enable vi mode keys
set-window-option -g mode-keys vi

# set default terminal mode to 256 colors
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*col*:RGB"

# present a menu of URLs to open from the visible pane. sweet.
bind u capture-pane \;\
    save-buffer /tmp/tmux-buffer \;\
    split-window -l 10 "urlview /tmp/tmux-buffer"

set -g history-limit 50000

set -g set-clipboard on

# loud or quiet?
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

# THEME

# --> Catppuccin (Mocha)
set -ogq @thm_bg "#1e1e2e"
set -ogq @thm_fg "#cdd6f4"

# Colors
set -ogq @thm_rosewater "#f5e0dc"
set -ogq @thm_flamingo "#f2cdcd"
set -ogq @thm_rosewater "#f5e0dc"
set -ogq @thm_pink "#f5c2e7"
set -ogq @thm_mauve "#cba6f7"
set -ogq @thm_red "#f38ba8"
set -ogq @thm_maroon "#eba0ac"
set -ogq @thm_peach "#fab387"
set -ogq @thm_yellow "#f9e2af"
set -ogq @thm_green "#a6e3a1"
set -ogq @thm_teal "#94e2d5"
set -ogq @thm_sky "#89dceb"
set -ogq @thm_sapphire "#74c7ec"
set -ogq @thm_blue "#89b4fa"
set -ogq @thm_lavender "#b4befe"

# Surfaces and overlays
set -ogq @thm_subtext_1 "#a6adc8"
set -ogq @thm_subtext_0 "#bac2de"
set -ogq @thm_overlay_2 "#9399b2"
set -ogq @thm_overlay_1 "#7f849c"
set -ogq @thm_overlay_0 "#6c7086"
set -ogq @thm_surface_2 "#585b70"
set -ogq @thm_surface_1 "#45475a"
set -ogq @thm_surface_0 "#313244"
set -ogq @thm_mantle "#181825"
set -ogq @thm_crust "#11111b"


#  modes
setw -g clock-mode-colour "#a6e3a1"
set -g mode-style "fg=#313244,bg=#a6e3a1"

# messages
set -g message-style "fg=#a6e3a1,bg=#313244"
set -g message-command-style "fg=#89b4fa,bg=#1e1e2e"

# panes
set -g pane-border-style "fg=#343942"
set -g pane-active-border-style "fg=#719cd6"

# pane number display
set -g display-panes-active-colour "#cba6f7"
set -g display-panes-colour "#89b4fa"

# statusbar
# CPU ≈ #(~/bin/smctemp -c)°C
# #(TZ='UTC' LANG=en_US date +'%%H:%%M %%Z')
set -g status on
set -g status-position bottom
set -g status-justify left
# set -g status-interval 1
set -g status-style "fg=#cdd6f4,bg=default"

set -g status-left-style NONE
set -g status-right-style NONE

set -g status-left ""
set -g status-right "#[fg=#cba6f7,bg=default]#{?client_prefix,#[fg=#f38ba8],}#[fg=#181a1f,bg=#cba6f7]#{?client_prefix,#[bg=#f38ba8],} #[fg=#cdd6f4,bg=#313244] #{pane_current_command}#[fg=#313244,bg=default] "
set -ag status-right "#[fg=#a6e3a1,bg=default]#[fg=#181a1f,bg=#a6e3a1] #[fg=#cdd6f4,bg=#313244] #S#[fg=#313244,bg=default] "
set -ag status-right "#[fg=#89b4fa,bg=default]#[fg=#181a1f,bg=#89b4fa]󱉊 #[fg=#cdd6f4,bg=#313244] #(TZ='UTC' LANG=en_US date +'%%H:%%M %%Z')#[fg=#313244,bg=default]"
set -g status-right-length 100
set -g status-left-length 50

set -g window-status-separator " "
setw -g window-status-style "NONE"
setw -g window-status-format '#[fg=#313244,bg=default]#[fg=#adb5c0,bg=#313244]#{b:pane_current_path}#{?window_zoomed_flag,(),} #[fg=#1e1e2e,bg=#89b4fa] #I#[fg=#89b4fa,bg=default]'
setw -g window-status-current-format '#[fg=#24273a,bg=default]#[fg=#cdd6f4,bg=#24273a,bold]#{b:pane_current_path}#{?window_zoomed_flag,(),} #[fg=#1e1e2e,bg=#fab387] #I#[fg=#fab387,bg=default]'

setw -g window-status-activity-style "underscore,fg=#1e1e2e,bg=#f38ba8"
setw -g window-status-bell-style "bg=#11111b,fg=#cdd6f4"

# osx clipboard
set-option -g default-command "which reattach-to-user-namespace > /dev/null && reattach-to-user-namespace -l $SHELL || $SHELL"

# Enable undercurl colors
# https://github.com/helix-editor/helix/issues/7065#issuecomment-1740422472
# set -g default-terminal "${TERM}"
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # underscore colours - needs tmux-3.0


if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

set -g @continuum-restore 'on'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/vim-tmux-focus-events'
set -g @plugin 'christoomey/vim-tmux-navigator'


 run '~/.tmux/plugins/tpm/tpm'

